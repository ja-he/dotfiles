# vim:foldmethod=indent

# long stuff to be referenced below
ieeecsl: &ieeecsl |
  <?xml version="1.0" encoding="utf-8"?>
  <style xmlns="http://purl.org/net/xbiblio/csl" class="in-text" version="1.0" demote-non-dropping-particle="sort-only">
    <info>
      <title>IEEE</title>
      <id>http://www.zotero.org/styles/ieee</id>
      <link href="http://www.zotero.org/styles/ieee" rel="self"/>
      <link href="https://ieeeauthorcenter.ieee.org/wp-content/uploads/IEEE-Reference-Guide.pdf" rel="documentation"/>
      <link href="https://journals.ieeeauthorcenter.ieee.org/your-role-in-article-production/ieee-editorial-style-manual/" rel="documentation"/>
      <author>
        <name>Michael Berkowitz</name>
        <email>mberkowi@gmu.edu</email>
      </author>
      <contributor>
        <name>Julian Onions</name>
        <email>julian.onions@gmail.com</email>
      </contributor>
      <contributor>
        <name>Rintze Zelle</name>
        <uri>http://twitter.com/rintzezelle</uri>
      </contributor>
      <contributor>
        <name>Stephen Frank</name>
        <uri>http://www.zotero.org/sfrank</uri>
      </contributor>
      <contributor>
        <name>Sebastian Karcher</name>
      </contributor>
      <contributor>
        <name>Giuseppe Silano</name>
        <email>g.silano89@gmail.com</email>
        <uri>http://giuseppesilano.net</uri>
      </contributor>
      <contributor>
        <name>Patrick O'Brien</name>
      </contributor>
      <contributor>
        <name>Brenton M. Wiernik</name>
      </contributor>
      <category citation-format="numeric"/>
      <category field="engineering"/>
      <category field="generic-base"/>
      <summary>IEEE style as per the 2018 guidelines, V 11.12.2018.</summary>
      <updated>2019-12-20T09:14:19+00:00</updated>
      <rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights>
    </info>
    <locale xml:lang="en">
      <terms>
        <term name="chapter" form="short">ch.</term>
        <term name="presented at">presented at the</term>
        <term name="available at">available</term>
      </terms>
    </locale>
    <!-- Macros -->
    <macro name="status">
      <choose>
        <if variable="page issue volume" match="none">
          <text variable="status" text-case="capitalize-first" suffix="" font-weight="bold"/>
        </if>
      </choose>
    </macro>
    <macro name="edition">
      <choose>
        <if type="bill book chapter graphic legal_case legislation motion_picture paper-conference report song" match="any">
          <choose>
            <if is-numeric="edition">
              <group delimiter=" ">
                <number variable="edition" form="ordinal"/>
                <text term="edition" form="short"/>
              </group>
            </if>
            <else>
              <text variable="edition" text-case="capitalize-first" suffix="."/>
            </else>
          </choose>
        </if>
      </choose>
    </macro>
    <macro name="issued">
      <choose>
        <if type="article-journal report" match="any">
          <date variable="issued">
            <date-part name="month" form="short" suffix=" "/>
            <date-part name="year" form="long"/>
          </date>
        </if>
        <else-if type="bill book chapter graphic legal_case legislation motion_picture song thesis" match="any">
          <date variable="issued">
            <date-part name="year" form="long"/>
          </date>
        </else-if>
        <else-if type="paper-conference" match="any">
          <date variable="issued">
            <date-part name="month" form="short"/>
            <date-part name="year" prefix=" "/>
          </date>
        </else-if>
        <else>
          <date variable="issued">
            <date-part name="month" form="short" suffix=" "/>
            <date-part name="day" form="numeric-leading-zeros" suffix=", "/>
            <date-part name="year"/>
          </date>
        </else>
      </choose>
    </macro>
    <macro name="author">
      <names variable="author">
        <name and="text" et-al-min="7" et-al-use-first="1" initialize-with=". "/>
        <label form="short" prefix=", " text-case="capitalize-first"/>
        <et-al font-style="italic"/>
        <substitute>
          <names variable="editor"/>
          <names variable="translator"/>
        </substitute>
      </names>
    </macro>
    <macro name="editor">
      <names variable="editor">
        <name initialize-with=". " delimiter=", " and="text"/>
        <label form="short" prefix=", " text-case="capitalize-first"/>
      </names>
    </macro>
    <macro name="locators">
      <group delimiter=", ">
        <text macro="edition"/>
        <group delimiter=" ">
          <text term="volume" form="short"/>
          <number variable="volume" form="numeric"/>
        </group>
        <group delimiter=" ">
          <number variable="number-of-volumes" form="numeric"/>
          <text term="volume" form="short" plural="true"/>
        </group>
        <group delimiter=" ">
          <text term="issue" form="short"/>
          <number variable="issue" form="numeric"/>
        </group>
      </group>
    </macro>
    <macro name="title">
      <choose>
        <if type="bill book graphic legal_case legislation motion_picture song" match="any">
          <text variable="title" font-style="italic"/>
        </if>
        <else>
          <text variable="title" quotes="true"/>
        </else>
      </choose>
    </macro>
    <macro name="publisher">
      <choose>
        <if type="bill book chapter graphic legal_case legislation motion_picture paper-conference song" match="any">
          <group delimiter=": ">
            <text variable="publisher-place"/>
            <text variable="publisher"/>
          </group>
        </if>
        <else>
          <group delimiter=", ">
            <text variable="publisher"/>
            <text variable="publisher-place"/>
          </group>
        </else>
      </choose>
    </macro>
    <macro name="event">
      <choose>
        <if type="paper-conference speech" match="any">
          <choose>
            <!-- Published Conference Paper -->
            <if variable="collection-editor editor editorial-director issue page volume" match="any">
              <group delimiter=", ">
                <group delimiter=" ">
                  <text term="in"/>
                  <text variable="container-title" font-style="italic"/>
                </group>
                <text variable="event-place"/>
              </group>
            </if>
            <!-- Unpublished Conference Paper -->
            <else>
              <group delimiter=", ">
                <group delimiter=" ">
                  <text term="presented at"/>
                  <text variable="event"/>
                </group>
                <text variable="event-place"/>
              </group>
            </else>
          </choose>
        </if>
      </choose>
    </macro>
    <macro name="access">
      <choose>
        <if type="webpage post post-weblog" match="any">
          <choose>
            <if variable="URL">
              <group delimiter=" ">
                <text variable="URL"/>
                <group delimiter=" " prefix="(" suffix=")">
                  <text term="accessed"/>
                  <date variable="accessed">
                    <date-part name="month" form="short" strip-periods="false"/>
                    <date-part name="day" form="numeric-leading-zeros" prefix=" " suffix=", "/>
                    <date-part name="year" form="long"/>
                  </date>
                </group>
              </group>
            </if>
          </choose>
        </if>
        <else-if match="any" variable="DOI">
          <text variable="DOI" prefix="doi: "/>
        </else-if>
        <else>
          <group delimiter=". ">
            <group delimiter=": ">
              <text term="accessed" text-case="capitalize-first"/>
              <date variable="accessed">
                <date-part name="month" form="short" suffix=" "/>
                <date-part name="day" form="numeric-leading-zeros" suffix=", "/>
                <date-part name="year"/>
              </date>
            </group>
            <text term="online" prefix="[" suffix="]" text-case="capitalize-first"/>
            <group delimiter=": ">
              <text term="available at" text-case="capitalize-first"/>
              <text variable="URL"/>
            </group>
          </group>
        </else>
      </choose>
    </macro>
    <macro name="page">
      <choose>
        <if type="article-journal" variable="number" match="all">
          <group delimiter=" ">
            <text value="Art."/>
            <text term="issue" form="short"/>
            <text variable="number"/>
          </group>
        </if>
        <else>
          <group delimiter=" ">
            <label variable="page" form="short"/>
            <text variable="page"/>
          </group>
        </else>
      </choose>
    </macro>
    <macro name="citation-locator">
      <group delimiter=" ">
        <choose>
          <if locator="page">
            <label variable="locator" form="short"/>
          </if>
          <else>
            <label variable="locator" form="short" text-case="capitalize-first"/>
          </else>
        </choose>
        <text variable="locator"/>
      </group>
    </macro>
    <!-- Citation -->
    <citation collapse="citation-number">
      <sort>
        <key variable="citation-number"/>
      </sort>
      <layout delimiter=", ">
        <group prefix="[" suffix="]" delimiter=", ">
          <text variable="citation-number"/>
          <text macro="citation-locator"/>
        </group>
      </layout>
    </citation>
    <!-- Bibliography -->
    <bibliography entry-spacing="0" second-field-align="flush">
      <layout suffix=".">
        <!-- Citation Number -->
        <text variable="citation-number" prefix="[" suffix="]"/>
        <!-- Author(s) -->
        <text macro="author" suffix=", "/>
        <!-- Rest of Citation -->
        <choose>
          <!-- Specific Formats -->
          <if type="article-journal">
            <group delimiter=", ">
              <text macro="title"/>
              <text variable="container-title" font-style="italic" form="short"/>
              <text macro="locators"/>
              <text macro="page"/>
              <text macro="issued"/>
              <text macro="status"/>
              <text macro="access"/>
            </group>
          </if>
          <else-if type="paper-conference speech" match="any">
            <group delimiter=", ">
              <text macro="title"/>
              <text macro="event"/>
              <text macro="issued"/>
              <text macro="locators"/>
              <text macro="page"/>
              <text macro="status"/>
              <text macro="access"/>
            </group>
          </else-if>
          <else-if type="report">
            <group delimiter=". ">
              <group delimiter=", ">
                <text macro="title"/>
                <text macro="publisher"/>
                <group delimiter=" ">
                  <text variable="genre"/>
                  <text variable="number"/>
                </group>
                <text macro="issued"/>
              </group>
              <text macro="access"/>
            </group>
          </else-if>
          <else-if type="thesis">
            <group delimiter=", ">
              <text macro="title"/>
              <text variable="genre"/>
              <text macro="publisher"/>
              <text macro="issued"/>
            </group>
          </else-if>
          <else-if type="webpage post-weblog post" match="any">
            <group delimiter=", " suffix=". ">
              <text macro="title"/>
              <text variable="container-title" font-style="italic"/>
              <text macro="issued"/>
            </group>
            <text macro="access"/>
          </else-if>
          <else-if type="patent">
            <group delimiter=", ">
              <text macro="title"/>
              <text variable="number"/>
              <text macro="issued"/>
            </group>
          </else-if>
          <!-- Generic/Fallback Formats -->
          <else-if type="bill book graphic legal_case legislation motion_picture report song" match="any">
            <group delimiter=", " suffix=". ">
              <text macro="title"/>
              <text macro="locators"/>
            </group>
            <group delimiter=", ">
              <text macro="publisher"/>
              <text macro="issued"/>
              <text macro="page"/>
            </group>
          </else-if>
          <else-if type="article-magazine article-newspaper broadcast interview manuscript map patent personal_communication song speech thesis webpage" match="any">
            <group delimiter=", ">
              <text macro="title"/>
              <text variable="container-title" font-style="italic"/>
              <text macro="locators"/>
              <text macro="publisher"/>
              <text macro="page"/>
              <text macro="issued"/>
            </group>
          </else-if>
          <else-if type="chapter paper-conference" match="any">
            <group delimiter=", " suffix=", ">
              <text macro="title"/>
              <group delimiter=" ">
                <text term="in"/>
                <text variable="container-title" font-style="italic"/>
              </group>
              <text macro="locators"/>
            </group>
            <text macro="editor" suffix=" "/>
            <group delimiter=", ">
              <text macro="publisher"/>
              <text macro="issued"/>
              <text macro="page"/>
            </group>
          </else-if>
          <else>
            <group delimiter=", " suffix=". ">
              <text macro="title"/>
              <text variable="container-title" font-style="italic"/>
              <text macro="locators"/>
            </group>
            <group delimiter=", ">
              <text macro="publisher"/>
              <text macro="page"/>
              <text macro="issued"/>
              <text macro="access"/>
            </group>
          </else>
        </choose>
      </layout>
    </bibliography>
  </style>
pandoc-tex-template-contents: &pandoc-tex-template-contents |
  % Options for packages loaded elsewhere
  \PassOptionsToPackage{unicode$for(hyperrefoptions)$,$hyperrefoptions$$endfor$}{hyperref}
  \PassOptionsToPackage{hyphens}{url}
  $if(colorlinks)$
  \PassOptionsToPackage{dvipsnames,svgnames,x11names}{xcolor}
  $endif$
  $if(CJKmainfont)$
  \PassOptionsToPackage{space}{xeCJK}
  $endif$
  %
  \documentclass[
  $if(fontsize)$
    $fontsize$,
  $endif$
  $if(papersize)$
    $papersize$paper,
  $endif$
  $if(beamer)$
    ignorenonframetext,
  $if(handout)$
    handout,
  $endif$
  $if(aspectratio)$
    aspectratio=$aspectratio$,
  $endif$
  $endif$
  $for(classoption)$
    $classoption$$sep$,
  $endfor$
  ]{$documentclass$}
  $if(beamer)$
  $if(background-image)$
  \usebackgroundtemplate{%
    \includegraphics[width=\paperwidth]{$background-image$}%
  }
  $endif$
  \usepackage{pgfpages}
  \setbeamertemplate{caption}[numbered]
  \setbeamertemplate{caption label separator}{: }
  \setbeamercolor{caption name}{fg=normal text.fg}
  \beamertemplatenavigationsymbols$if(navigation)$$navigation$$else$empty$endif$
  $for(beameroption)$
  \setbeameroption{$beameroption$}
  $endfor$
  % Prevent slide breaks in the middle of a paragraph
  \widowpenalties 1 10000
  \raggedbottom
  $if(section-titles)$
  \setbeamertemplate{part page}{
    \centering
    \begin{beamercolorbox}[sep=16pt,center]{part title}
      \usebeamerfont{part title}\insertpart\par
    \end{beamercolorbox}
  }
  \setbeamertemplate{section page}{
    \centering
    \begin{beamercolorbox}[sep=12pt,center]{part title}
      \usebeamerfont{section title}\insertsection\par
    \end{beamercolorbox}
  }
  \setbeamertemplate{subsection page}{
    \centering
    \begin{beamercolorbox}[sep=8pt,center]{part title}
      \usebeamerfont{subsection title}\insertsubsection\par
    \end{beamercolorbox}
  }
  \AtBeginPart{
    \frame{\partpage}
  }
  \AtBeginSection{
    \ifbibliography
    \else
      \frame{\sectionpage}
    \fi
  }
  \AtBeginSubsection{
    \frame{\subsectionpage}
  }
  $endif$
  $endif$
  $if(beamerarticle)$
  \usepackage{beamerarticle} % needs to be loaded first
  $endif$
  \usepackage{amsmath,amssymb}
  $if(fontfamily)$
  \usepackage[$for(fontfamilyoptions)$$fontfamilyoptions$$sep$,$endfor$]{$fontfamily$}
  $else$
  \usepackage{lmodern}
  $endif$
  $if(linestretch)$
  \usepackage{setspace}
  $endif$
  \usepackage{iftex}
  \ifPDFTeX
    \usepackage[$if(fontenc)$$fontenc$$else$T1$endif$]{fontenc}
    \usepackage[utf8]{inputenc}
    \usepackage{textcomp} % provide euro and other symbols
  \else % if luatex or xetex
  $if(mathspec)$
    \ifXeTeX
      \usepackage{mathspec}
    \else
      \usepackage{unicode-math}
    \fi
  $else$
    \usepackage{unicode-math}
  $endif$
    \defaultfontfeatures{Scale=MatchLowercase}
    \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
  $if(mainfont)$
    \setmainfont[$for(mainfontoptions)$$mainfontoptions$$sep$,$endfor$]{$mainfont$}
  $endif$
  $if(sansfont)$
    \setsansfont[$for(sansfontoptions)$$sansfontoptions$$sep$,$endfor$]{$sansfont$}
  $endif$
  $if(monofont)$
    \setmonofont[$for(monofontoptions)$$monofontoptions$$sep$,$endfor$]{$monofont$}
  $endif$
  $for(fontfamilies)$
    \newfontfamily{$fontfamilies.name$}[$for(fontfamilies.options)$$fontfamilies.options$$sep$,$endfor$]{$fontfamilies.font$}
  $endfor$
  $if(mathfont)$
  $if(mathspec)$
    \ifXeTeX
      \setmathfont(Digits,Latin,Greek)[$for(mathfontoptions)$$mathfontoptions$$sep$,$endfor$]{$mathfont$}
    \else
      \setmathfont[$for(mathfontoptions)$$mathfontoptions$$sep$,$endfor$]{$mathfont$}
    \fi
  $else$
    \setmathfont[$for(mathfontoptions)$$mathfontoptions$$sep$,$endfor$]{$mathfont$}
  $endif$
  $endif$
  $if(CJKmainfont)$
    \ifXeTeX
      \usepackage{xeCJK}
      \setCJKmainfont[$for(CJKoptions)$$CJKoptions$$sep$,$endfor$]{$CJKmainfont$}
    \fi
  $endif$
  $if(luatexjapresetoptions)$
    \ifLuaTeX
      \usepackage[$for(luatexjapresetoptions)$$luatexjapresetoptions$$sep$,$endfor$]{luatexja-preset}
    \fi
  $endif$
  $if(CJKmainfont)$
    \ifLuaTeX
      \usepackage[$for(luatexjafontspecoptions)$$luatexjafontspecoptions$$sep$,$endfor$]{luatexja-fontspec}
      \setmainjfont[$for(CJKoptions)$$CJKoptions$$sep$,$endfor$]{$CJKmainfont$}
    \fi
  $endif$
  \fi
  $if(zero-width-non-joiner)$
  %% Support for zero-width non-joiner characters.
  \makeatletter
  \def\zerowidthnonjoiner{%
    % Prevent ligatures and adjust kerning, but still support hyphenating.
    \texorpdfstring{%
      \TextOrMath{\nobreak\discretionary{-}{}{\kern.03em}%
        \ifvmode\else\nobreak\hskip\z@skip\fi}{}%
    }{}%
  }
  \makeatother
  \ifPDFTeX
    \DeclareUnicodeCharacter{200C}{\zerowidthnonjoiner}
  \else
    \catcode`^^^^200c=\active
    \protected\def ^^^^200c{\zerowidthnonjoiner}
  \fi
  %% End of ZWNJ support
  $endif$
  $if(beamer)$
  $if(theme)$
  \usetheme[$for(themeoptions)$$themeoptions$$sep$,$endfor$]{$theme$}
  $endif$
  $if(colortheme)$
  \usecolortheme{$colortheme$}
  $endif$
  $if(fonttheme)$
  \usefonttheme{$fonttheme$}
  $endif$
  $if(mainfont)$
  \usefonttheme{serif} % use mainfont rather than sansfont for slide text
  $endif$
  $if(innertheme)$
  \useinnertheme{$innertheme$}
  $endif$
  $if(outertheme)$
  \useoutertheme{$outertheme$}
  $endif$
  $endif$
  % Use upquote if available, for straight quotes in verbatim environments
  \IfFileExists{upquote.sty}{\usepackage{upquote}}{}
  \IfFileExists{microtype.sty}{% use microtype if available
    \usepackage[$for(microtypeoptions)$$microtypeoptions$$sep$,$endfor$]{microtype}
    \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
  }{}
  $if(indent)$
  $else$
  \makeatletter
  \@ifundefined{KOMAClassName}{% if non-KOMA class
    \IfFileExists{parskip.sty}{%
      \usepackage{parskip}
    }{% else
      \setlength{\parindent}{0pt}
      \setlength{\parskip}{6pt plus 2pt minus 1pt}}
  }{% if KOMA class
    \KOMAoptions{parskip=half}}
  \makeatother
  $endif$
  $if(verbatim-in-note)$
  \usepackage{fancyvrb}
  $endif$
  \usepackage{xcolor}
  $if(geometry)$
  $if(beamer)$
  \geometry{$for(geometry)$$geometry$$sep$,$endfor$}
  $else$
  \usepackage[$for(geometry)$$geometry$$sep$,$endfor$]{geometry}
  $endif$
  $endif$
  $if(beamer)$
  \newif\ifbibliography
  $endif$
  $if(listings)$
  \usepackage{listings}
  \newcommand{\passthrough}[1]{#1}
  \lstset{defaultdialect=[5.3]Lua}
  \lstset{defaultdialect=[x86masm]Assembler}
  $endif$
  $if(lhs)$
  \lstnewenvironment{code}{\lstset{language=Haskell,basicstyle=\small\ttfamily}}{}
  $endif$
  $if(highlighting-macros)$
  $highlighting-macros$
  $endif$
  $if(tables)$
  \usepackage{longtable,booktabs,array}
  $if(multirow)$
  \usepackage{multirow}
  $endif$
  \usepackage{calc} % for calculating minipage widths
  $if(beamer)$
  \usepackage{caption}
  % Make caption package work with longtable
  \makeatletter
  \def\fnum@table{\tablename~\thetable}
  \makeatother
  $else$
  % Correct order of tables after \paragraph or \subparagraph
  \usepackage{etoolbox}
  \makeatletter
  \patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
  \makeatother
  % Allow footnotes in longtable head/foot
  \IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
  \makesavenoteenv{longtable}
  $endif$
  $endif$
  $if(graphics)$
  \usepackage{graphicx}
  \makeatletter
  \def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
  \def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
  \makeatother
  % Scale images if necessary, so that they will not overflow the page
  % margins by default, and it is still possible to overwrite the defaults
  % using explicit options in \includegraphics[width, height, ...]{}
  \setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
  % Set default figure placement to htbp
  \makeatletter
  \def\fps@figure{htbp}
  \makeatother
  $endif$
  $if(strikeout)$
  $-- also used for underline
  \usepackage[normalem]{ulem}
  $endif$
  \setlength{\emergencystretch}{3em} % prevent overfull lines
  \providecommand{\tightlist}{%
    \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
  $if(numbersections)$
  \setcounter{secnumdepth}{$if(secnumdepth)$$secnumdepth$$else$5$endif$}
  $else$
  \setcounter{secnumdepth}{-\maxdimen} % remove section numbering
  $endif$
  $if(beamer)$
  $else$
  $if(block-headings)$
  % Make \paragraph and \subparagraph free-standing
  \ifx\paragraph\undefined\else
    \let\oldparagraph\paragraph
    \renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
  \fi
  \ifx\subparagraph\undefined\else
    \let\oldsubparagraph\subparagraph
    \renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
  \fi
  $endif$
  $endif$
  $if(pagestyle)$
  \pagestyle{$pagestyle$}
  $endif$
  $if(csl-refs)$
  \newlength{\cslhangindent}
  \setlength{\cslhangindent}{1.5em}
  \newlength{\csllabelwidth}
  \setlength{\csllabelwidth}{3em}
  \newlength{\cslentryspacingunit} % times entry-spacing
  \setlength{\cslentryspacingunit}{\parskip}
  \newenvironment{CSLReferences}[2] % #1 hanging-ident, #2 entry spacing
   {% don't indent paragraphs
    \setlength{\parindent}{0pt}
    % turn on hanging indent if param 1 is 1
    \ifodd #1
    \let\oldpar\par
    \def\par{\hangindent=\cslhangindent\oldpar}
    \fi
    % set entry spacing
    \setlength{\parskip}{#2\cslentryspacingunit}
   }%
   {}
  \usepackage{calc}
  \newcommand{\CSLBlock}[1]{#1\hfill\break}
  \newcommand{\CSLLeftMargin}[1]{\parbox[t]{\csllabelwidth}{#1}}
  \newcommand{\CSLRightInline}[1]{\parbox[t]{\linewidth - \csllabelwidth}{#1}\break}
  \newcommand{\CSLIndent}[1]{\hspace{\cslhangindent}#1}
  $endif$
  $if(lang)$
  \ifLuaTeX
  \usepackage[bidi=basic]{babel}
  \else
  \usepackage[bidi=default]{babel}
  \fi
  $if(babel-lang)$
  \babelprovide[main,import]{$babel-lang$}
  $endif$
  $for(babel-otherlangs)$
  \babelprovide[import]{$babel-otherlangs$}
  $endfor$
  % get rid of language-specific shorthands (see #6817):
  \let\LanguageShortHands\languageshorthands
  \def\languageshorthands#1{}
  $endif$
  $for(header-includes)$
  $header-includes$
  $endfor$
  \ifLuaTeX
    \usepackage{selnolig}  % disable illegal ligatures
  \fi
  $if(dir)$
  \ifPDFTeX
    \TeXXeTstate=1
    \newcommand{\RL}[1]{\beginR #1\endR}
    \newcommand{\LR}[1]{\beginL #1\endL}
    \newenvironment{RTL}{\beginR}{\endR}
    \newenvironment{LTR}{\beginL}{\endL}
  \fi
  $endif$
  $if(natbib)$
  \usepackage[$natbiboptions$]{natbib}
  \bibliographystyle{$if(biblio-style)$$biblio-style$$else$plainnat$endif$}
  $endif$
  $if(biblatex)$
  \usepackage[$if(biblio-style)$style=$biblio-style$,$endif$$for(biblatexoptions)$$biblatexoptions$$sep$,$endfor$]{biblatex}
  $for(bibliography)$
  \addbibresource{$bibliography$}
  $endfor$
  $endif$
  $if(nocite-ids)$
  \nocite{$for(nocite-ids)$$it$$sep$, $endfor$}
  $endif$
  $if(csquotes)$
  \usepackage{csquotes}
  $endif$
  \IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
  \IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
  \urlstyle{same} % disable monospaced font for URLs
  $if(links-as-notes)$
  % Make links footnotes instead of hotlinks:
  \DeclareRobustCommand{\href}[2]{#2\footnote{\url{#1}}}
  $endif$
  $if(verbatim-in-note)$
  \VerbatimFootnotes % allow verbatim text in footnotes
  $endif$
  \hypersetup{
  $if(title-meta)$
    pdftitle={$title-meta$},
  $endif$
  $if(author-meta)$
    pdfauthor={$author-meta$},
  $endif$
  $if(lang)$
    pdflang={$lang$},
  $endif$
  $if(subject)$
    pdfsubject={$subject$},
  $endif$
  $if(keywords)$
    pdfkeywords={$for(keywords)$$keywords$$sep$, $endfor$},
  $endif$
  $if(colorlinks)$
    colorlinks=true,
    linkcolor={$if(linkcolor)$$linkcolor$$else$Maroon$endif$},
    filecolor={$if(filecolor)$$filecolor$$else$Maroon$endif$},
    citecolor={$if(citecolor)$$citecolor$$else$Blue$endif$},
    urlcolor={$if(urlcolor)$$urlcolor$$else$Blue$endif$},
  $else$
  $if(boxlinks)$
  $else$
    hidelinks,
  $endif$
  $endif$
    pdfcreator={LaTeX via pandoc}}

  $if(title)$
  \title{$title$$if(thanks)$\thanks{$thanks$}$endif$}
  $endif$
  $if(subtitle)$
  $if(beamer)$
  $else$
  \usepackage{etoolbox}
  \makeatletter
  \providecommand{\subtitle}[1]{% add subtitle to \maketitle
    \apptocmd{\@title}{\par {\large #1 \par}}{}{}
  }
  \makeatother
  $endif$
  \subtitle{$subtitle$}
  $endif$
  \author{$for(author)$$author$$sep$ \and $endfor$}
  \date{$date$}
  $if(beamer)$
  $if(institute)$
  \institute{$for(institute)$$institute$$sep$ \and $endfor$}
  $endif$
  $if(titlegraphic)$
  \titlegraphic{\includegraphics{$titlegraphic$}}
  $endif$
  $if(logo)$
  \logo{\includegraphics{$logo$}}
  $endif$
  $endif$

  \let\oldTexttt\texttt
  \renewcommand{\texttt}[1]{\oldTexttt{\textcolor{teal}{#1}}}

  \usepackage{xcolor}
  \usepackage[skins,breakable]{tcolorbox}
  \tcbuselibrary{breakable}
  \usepackage{changepage}
  \let\oldquote=\quote
  \let\endoldquote=\endquote
  \renewenvironment{quote}
    {\begin{adjustwidth}{2em}{2em}\begin{tcolorbox}[enhanced
      jigsaw,colframe=NavajoWhite,colback=Linen,breakable]}
    {\end{tcolorbox}\end{adjustwidth}}

  \begin{document}
  $if(has-frontmatter)$
  \frontmatter
  $endif$
  $if(title)$
  $if(beamer)$
  \frame{\titlepage}
  $else$
  \maketitle
  $endif$
  $if(abstract)$
  \begin{abstract}
  $abstract$
  \end{abstract}
  $endif$
  $endif$

  $for(include-before)$
  $include-before$

  $endfor$
  $if(toc)$
  $if(toc-title)$
  \renewcommand*\contentsname{$toc-title$}
  $endif$
  $if(beamer)$
  \begin{frame}[allowframebreaks]
  $if(toc-title)$
    \frametitle{$toc-title$}
  $endif$
    \tableofcontents[hideallsubsections]
  \end{frame}
  $else$
  {
  $if(colorlinks)$
  \hypersetup{linkcolor=$if(toccolor)$$toccolor$$else$$endif$}
  $endif$
  \setcounter{tocdepth}{$toc-depth$}
  \tableofcontents
  }
  $endif$
  $endif$
  $if(lof)$
  \listoffigures
  $endif$
  $if(lot)$
  \listoftables
  $endif$
  $if(linestretch)$
  \setstretch{$linestretch$}
  $endif$
  $if(has-frontmatter)$
  \mainmatter
  $endif$
  $body$

  $if(has-frontmatter)$
  \backmatter
  $endif$
  $if(natbib)$
  $if(bibliography)$
  $if(biblio-title)$
  $if(has-chapters)$
  \renewcommand\bibname{$biblio-title$}
  $else$
  \renewcommand\refname{$biblio-title$}
  $endif$
  $endif$
  $if(beamer)$
  \begin{frame}[allowframebreaks]{$biblio-title$}
    \bibliographytrue
  $endif$
    \bibliography{$for(bibliography)$$bibliography$$sep$,$endfor$}
  $if(beamer)$
  \end{frame}
  $endif$

  $endif$
  $endif$
  $if(biblatex)$
  $if(beamer)$
  \begin{frame}[allowframebreaks]{$biblio-title$}
    \bibliographytrue
    \printbibliography[heading=none]
  \end{frame}
  $else$
  \printbibliography$if(biblio-title)$[title=$biblio-title$]$endif$
  $endif$

  $endif$
  $for(include-after)$
  $include-after$

  $endfor$
  \end{document}
pandoc-general-css: &pandoc-general-css |
  html {
    line-height: 1.5;
    font-family: sans-serif;
    font-size: 20px;
    color: #1a1a1a;
  }
  body {
    margin: 0 auto;
    max-width: 36em;
    padding-left: 50px;
    padding-right: 50px;
    padding-top: 50px;
    padding-bottom: 50px;
    hyphens: auto;
    overflow-wrap: break-word;
    text-rendering: optimizeLegibility;
    font-kerning: normal;
  }
  @media (max-width: 600px) {
    body {
      font-size: 0.9em;
      padding: 1em;
    }
    h1 {
      font-size: 1.8em;
    }
  }
  @media print {
    body {
      background-color: transparent;
      color: black;
      font-size: 12pt;
    }
    p, h2, h3 {
      orphans: 3;
      widows: 3;
    }
    h2, h3, h4 {
      page-break-after: avoid;
    }
  }
  p {
    margin: 1em 0;
  }
  a {
    color: #15426b;
  }
  a:visited {
    color: #15426b;
  }
  img {
    max-width: 100%;
  }
  h1, h2, h3, h4, h5, h6 {
    margin-top: 1.4em;
  }
  h5, h6 {
    font-size: 1em;
    font-style: italic;
  }
  h6 {
    font-weight: normal;
  }
  ol, ul {
    padding-left: 1.7em;
    margin-top: 1em;
  }
  li > ol, li > ul {
    margin-top: 0;
  }
  dl {
    margin: 1em;
    padding-left: 1em;
    padding-right: 1em;
    background: #e6f6ff;
  }
  dt {
    text-decoration: underline;
  }
  blockquote {
    margin: 1em 0 1em 1.7em;
    padding-left: 1em;
    border-left: 2px solid #e6e6e6;
    color: #606060;
  }
  code {
    font-family: monospace;
    font-size: 85%;
    margin: 0;
    padding-left: 0.25em;
    padding-right: 0.25em;
  }
  pre {
    margin: 1em 0;
    padding-left: 1em;
    padding-right: 1em;
    overflow: auto;
    background: #00000011;
  }
  pre code {
    background: #00000000;
    padding: 0;
    overflow: visible;
    overflow-wrap: normal;
    white-space: pre;
  }
  code {
    background: #00000011;
    border-radius: 0.15em;
  }
  .sourceCode {
    background-color: transparent;
    overflow: visible;
  }
  pre.sourceCode {
    background: #00000011;
  }
  code.sourceCode {
    background: #00000000;
  }
  hr {
    background-color: #1a1a1a;
    border: none;
    height: 1px;
    margin: 1em 0;
  }
  table {
    margin-left: auto;
    margin-right: auto;
    border-collapse: collapse;
    width: 50%;
    overflow-x: auto;
    display: block;
    font-variant-numeric: lining-nums tabular-nums;
  }
  table caption {
    margin-bottom: 0.75em;
  }
  tbody {
    margin-top: 0.5em;
    border-top: 1px solid #1a1a1a;
    border-bottom: 1px solid #1a1a1a;
  }
  th {
    border-top: 1px solid #1a1a1a;
    padding: 0.25em 0.5em 0.25em 0.5em;
  }
  td {
    padding: 0.125em 0.5em 0.25em 0.5em;
  }
  header {
    margin-bottom: 4em;
    text-align: center;
  }
  #TOC li {
    list-style: none;
  }
  #TOC ul {
    padding-left: 1.3em;
  }
  #TOC > ul {
    padding-left: 0;
  }
  #TOC a:not(:hover) {
    text-decoration: none;
  }
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  div.columns{display: flex; gap: min(4vw, 1.5em);}
  div.column{flex: auto; overflow-x: auto;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
  ul.task-list li input[type="checkbox"] {
    width: 0.8em;
    margin: 0 0.8em 0.2em -1.6em;
    vertical-align: middle;
  }
  .display.math{display: block; text-align: center; margin: 0.5rem auto;}

  .assumption {
    background: #ffe6e6;
    margin: 1em;
    font-size: 0.75em;
    padding-left: 1em;
    padding-right: 1em;
    padding-top: 0.5em;
    padding-bottom: 0.5em;
  }
  .sidenote {
    background: #ecffc6;
    margin: 1em;
    font-size: 0.75em;
    padding-left: 1em;
    padding-right: 1em;
    padding-top: 0.5em;
    padding-bottom: 0.5em;
  }

  .references {
    background: #e6e6e6;
    padding-left: 1em;
    padding-right: 1em;
    padding-bottom: 1em;
  }
  div.csl-bib-body { }
  div.csl-entry {
    clear: both;
    font-size: 0.75em;
    margin-bottom: 1em;
  }
  .hanging div.csl-entry {
    margin-left:2em;
    text-indent:-2em;
  }
  div.csl-left-margin {
    color: #888888;
    font-weight: bold;
    min-width:2em;
    float:left;
  }
  div.csl-right-inline {
    margin-left:2em;
    padding-left:1em;
  }
  div.csl-indent {
    margin-left: 2em;
  }

  details {
    background: #f8f8f8;
    color: #4c4c4c;
    padding-left: 0.5em;
    padding-right: 0.5em;
    border-radius: 0.25em;
    border: 1px solid #4c4c4c;
  }

  .title {
    text-decoration: underline #000088;
  }
  .author {
  }
  .date {
    font-family: monospace;
    font-size: 0.5em;
  }

Ks:
  public:
    url: "git@gitlab.informatik.uni-bremen.de:ja_he/zettelkasten-public.git"
    path: "${HOME}/z/public"
  misc:
    url: "git@gitlab.informatik.uni-bremen.de:ja_he/zettelkasten-misc.git"
    path: "${HOME}/z/misc"
  dayplan:
    url: "git@github.com:ja-he/zettelkasten-dayplan.git"
    path: /home/ztf/z/dayplan
  namib:
    url: "git@gitlab.informatik.uni-bremen.de:ja_he/zettelkasten-namib.git"
    path: "${HOME}/z/namib"
  shsq:
    url: "git@gitlab.informatik.uni-bremen.de:ja_he/zettelkasten-shsq"
    path: "${HOME}/z/shsq"
  krypt:
    url: "git@gitlab.informatik.uni-bremen.de:ja_he/zettelkasten-krypt"
    path: "${HOME}/z/krypt"
  swre:
    url: "git@gitlab.informatik.uni-bremen.de:ja_he/zettelkasten-swre"
    path: "${HOME}/z/swre"
  legacy:
    url: "git@gitlab.informatik.uni-bremen.de:ja_he/notes.git"
    path: "${HOME}/z/legacy"

blueprints:
  eml:
    templates:
      "{{.Name}}.eml": ""
    open: "nvim {{.Name}}.eml"
  md:
    templates:
      "{{.Name}}.md": |
        ---
        title: {{.Name}}
        date: {{.Today}}
        ---
    open: "nvim {{.Name}}.md"
  md-presentation-beamer:
    subdir: "{{.Name}}"
    sources: [ "index.md", "bibliography.bib" ]
    objects: [ "{{.Name}}-slides.pdf" ]
    templates:
      "index.md": |
        ---
        title: {{.Name}}
        date: {{.Today}}
        author: Jan Hensel
        link-citations: true
        bibliography: ./bibliography.bib
        csl: ./.ieee.csl
        ---

        ::: {#refs}
        # References

        :::
      "bibliography.bib": "% TODO\n"
      ".ieee.csl": *ieeecsl
      "Makefile": "{{.Name}}-slides.pdf: index.md bibliography.bib\n\tpandoc index.md -f markdown -t beamer --citeproc -s -o {{.Name}}-slides.pdf\n"
    open: "nvim index.md"
    view: "zathura {{.Name}}-slides.pdf"
    post: [ "make {{.Name}}-slides.pdf" ]
  md-pandoc-for-pdf:
    subdir: "{{.Name}}"
    sources: [ "index.md", "bibliography.bib" ]
    objects: [ "index.pdf" ]
    templates:
      "index.md": |
        ---
        title: {{.Name}}
        date: {{.Today}}
        author: Jan Hensel
        documentclass: article
        papersize: a4
        geometry:
        - top=2.5cm
        - left=2.5cm
        fontfamily: mathpazo
        link-citations: true
        bibliography: ./bibliography.bib
        csl: ./.ieee.csl
        colorlinks: true
        urlcolor: NavyBlue
        linkcolor: DarkRed
        links-as-notes: true
        ---

        ::: {#refs}
        # References

        :::
      "bibliography.bib": "% TODO\n"
      ".ieee.csl": *ieeecsl
      ".template.tex": *pandoc-tex-template-contents
      "Makefile": |
        index.pdf: index.md bibliography.bib
        	pandoc index.md -f markdown -t pdf --citeproc --template=.template.tex -s -o index.pdf
    open: "nvim index.md"
    post: [ "make index.pdf" ]
  md-pandoc-html:
    subdir: "{{.Name}}"
    sources: [ "index.md", "bibliography.bib", "style.css" ]
    objects: [ "index.html" ]
    templates:
      "index.md": |
        ---
        title: {{.Name}}
        date: {{.Today}}
        author: Jan Hensel
        link-citations: true
        bibliography: ./bibliography.bib
        nocite: [ '@*' ]
        csl: ./.ieee.csl
        css: style.css
        ---

        ::: {#refs}
        # References

        :::
      "bibliography.bib": "% TODO\n"
      ".ieee.csl": *ieeecsl
      "Makefile": |
        index.html: index.md bibliography.bib
        	pandoc index.md -f markdown -t html --citeproc --standalone -o index.html
      "style.css": *pandoc-general-css
    open: "nvim index.md"
    view: "qutebrowser index.html"
    post: [ "make index.html" ]
  md-zola-simple:
    templates:
      "{{.Name}}.md": |
        +++
        title = '{{.Name}}'
        date = '{{.Today}}'
        draft = true
        +++
    open: "nvim {{.Name}}.md"
  md-zola-with-pdf:
    subdir: "{{.Name}}"
    templates:
      "index.md": |
        +++
        title = '{{.Name}}'
        date = '{{.Today}}'
        draft = true
        +++
    open: "nvim index.md"
    sources: [ "index.md" ]
    objects: [ "index.pdf" ]
    post:
      - >-
        (
        (
        echo '---';
        cat index.md
        | sed -n '/+++/,/+++/p'
        | sed '1d; $d'
        | remarshal -if toml -of yaml
        ; echo '---'
        )
        ;
        (cat index.md | sed -n '/+++/,/+++/!p')
        )
        | pandoc -f markdown -t pdf --pdf-engine lualatex -V 'mainfont:Nimbus Roman' -s -o index.pdf
  xopp:
    subdir: "{{.Name}}"
    open: "xournalpp main.xopp"
    sources: [ "main.xopp" ]
    objects: 
      - "exported.png"
    post:
      - xournalpp main.xopp --create-img=exported.png --export-no-ruling --export-png-dpi=300
  tex:
    subdir: "{{.Name}}"
    templates:
      "main.tex": |
        \documentclass[a4paper]{article}

        \begin{document}

        % TODO: content?!

        \end{document}
      "bibliography.bib": "% TODO\n"
    open: "nvim main.tex"
    post: [ "latexmk -pdf main.tex" ]
    sources: [ "main.tex", "bibliography.bib" ]
    objects: [ "main.pdf" ]
  tex-paper:
    subdir: "{{.Name}}"
    templates:
      "main.tex": |
        \documentclass[%
          a4paper,
          twocolumn,
        ]{article}

        \makeatletter
        \newbox\abstract@box
        \renewenvironment{abstract}
          {\global\setbox\abstract@box=\vbox\bgroup
             \hsize=\textwidth\linewidth=\textwidth
            \small
            \begin{center}%
            {\bfseries \abstractname\vspace{-.5em}\vspace{\z@}}%
            \end{center}%
            \quotation}
          {\endquotation\egroup}
        \expandafter\def\expandafter\@maketitle\expandafter{\@maketitle
          \ifvoid\abstract@box\else\unvbox\abstract@box\if@twocolumn\vskip1.5em\fi\fi}
        \makeatother

        \usepackage[english]{babel}

        \usepackage{mathpazo}
        \usepackage[%
          margin=2.5cm,
          % showframe,
        ]{geometry}
        \usepackage[dvipsnames]{xcolor}
        \usepackage{marginfix}
        \usepackage{titlesec}
        \titleformat*{\paragraph}{\scshape}

        \usepackage{hyperref}
        \hypersetup{
          colorlinks=true,
          linkcolor={NavyBlue},
          anchorcolor={red},
          citecolor={ForestGreen},
          filecolor={black},
          menucolor={red},
          runcolor={red},
          urlcolor={black},
          linktoc=page,
        }
        \usepackage{titletoc,tocloft}
        \setlength{\cftsubsecindent}{0.5em}
        \setlength{\cftsubsubsecindent}{1em}
        \dottedcontents{section}[1.5em]{}{1.3em}{.6em}

        \usepackage[%
          automake,
          % debug=showtargets,
          nopostdot=true,
        ]{glossaries}
        \usepackage[
          % showtargets=left,
        ]{glossaries-extra}

        \usepackage{biblatex}
        \usepackage{csquotes}
        \addbibresource{bibliography.bib}

        \usepackage[fulladjust]{marginnote}

        \usepackage{listings}
        \lstdefinestyle{custom}{
            backgroundcolor=\color{black!5},
            commentstyle=\color{black!50},
            keywordstyle=\bfseries\color{NavyBlue},
            stringstyle=\color{ForestGreen},
            basicstyle=\ttfamily\lst@ifdisplaystyle\scriptsize\else\small\fi,
            breakatwhitespace=false,
            breaklines=true,
            captionpos=t,
            keepspaces=true,
            numbers=none,
            numbersep=5pt,
            showspaces=false,
            showstringspaces=false,
            showtabs=false,
            tabsize=2,
        }
        \lstset{style=custom}

        \setabbreviationstyle[acronym]{long-short}
        \newcommand{\firstuseformat}[1]{\textbf{\color{black}#1}}
        \newcommand{\otheruseformat}[1]{%
          {\color{black}#1}%
        }
        \renewcommand{\glslinkpresetkeys}{%
          \ifglsused{\glslabel}%
            {\let\glstextformat\otheruseformat}%
            {\let\glstextformat\firstuseformat}%
        }
        \input{glossary.tex}
        \makeglossaries

        \usepackage{blindtext}
        \newcommand{\missingStyle}[1]{%
          {\textcolor{black!25}#1}%
        }
        \newcommand{\missing}{\missingStyle{\blindtext}}
        \newcommand{\Missing}{\missingStyle{\Blindtext}}

        \title{%
          {{.Name}}
        }
        \author{%
          {Jan Hensel}%
          \thanks{%
            (org)\\
            (thanks to ...)
          }
        }

        \begin{document}

        \begin{abstract}
          \missing
        \end{abstract}

        \maketitle

        \tableofcontents

        \section{Introduction}
        This is a fake introduction.
        Think about \gls{tbd}, but also---crucially---consider \gls{example}.
        We'll draw heavily from~\cite{example}.

        \Missing

        \section{Content A}
        \missing

        \subsection{A a}
        \Missing

        \section{Content B}
        \missing

        \subsection{B b}
        \Missing

        \section{Conclusion}
        \Missing

        % \hfill
        % \begin{center}
        %   \rule{0.25\textwidth}{0.5pt}
        % \end{center}
        % \hfill




        % BACKMATTER
        \newpage
        \printglossaries
        \printbibliography

        \end{document}
      "bibliography.bib": |
        @misc{example,
          shorthand    = {Ex},
          title        = {Example},
          author       = {Mustermann, Max},
          organization = {Generic Institute of Higher Intricacies},
        }
      "glossary.tex": |
        \newglossaryentry{example}{
          name={Example},
          description={A thing you should remove after using this template.},
        }
        \newacronym{tbd}{TBD}{to be determined}
    open: "nvim main.tex"
    post: [ "latexmk -pdf main.tex" ]
    sources: [ "main.tex", "bibliography.bib", "glossary.tex" ]
    objects: [ "main.pdf" ]
  tex-letter:
    subdir: "{{.Name}}"
    templates:
      "main.tex": |
        \documentclass[a4paper]{scrlttr2}

        \usepackage{mathpazo}
        \usepackage{hyperref}
        \usepackage[top=1cm,bottom=1cm,left=2.0cm,right=2.0cm]{geometry}

        % input & font encoding
        \usepackage[utf8]{inputenc}
        % \usepackage[english]{babel}
        \usepackage[english]{babel}
        % % no paragraph start indentation
        \setlength{\parindent}{0em}
        % % small gaps between paragraphs
        \setlength{\parskip}{0.5em}

        \setkomavar{fromname}{Jan Hensel}
        \setkomavar{fromaddress}{My\\Address\\Here}
        \setkomavar{subject}{Letter Subject}

        \begin{document}

        \begin{letter}{Person\\
                       Street\\
                       City, Country}

            \opening{Dear ...,}

            yada yada yada.

            \closing{Kind regards,}
          \end{letter}
        \end{document}
      "Makefile": |
        main.pdf: main.tex
        	latexmk --quiet --pdf main.tex

        clean:
        	latexmk -C
    open: "nvim main.tex"
    post: [ "make" ]
    sources: [ "main.tex" ]
    objects: [ "main.pdf" ]
  journal:
    open: "nvim {{.Today}}_{{.Name}}.md"
